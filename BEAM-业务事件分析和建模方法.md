# 第三节 BEAM\*：业务事件分析和建模方法   
>BEAM\*是一种敏捷维度建模方法     
 
BEAM是一种设计维度数据仓库和数据集市的敏捷数据建模方法。BEAM代表的英文全称是Business Event Analysis and Modeling，中文名称是业务事件分析和建模。   
顾名思义，BEAM*组合了需求分析技巧和数据建模技巧，前者用于收集业务事件相关数据需求，后者用于数据仓库设计。*则表示交付成果：星型模型及其使用7W框架来描述的维度位置。
>BEAM被用于探索和记录业务事件细节   
BEAM由一系列可重复、协作的建模技巧和强包容性的建模符号组成。建模技巧用于快速探索业务事件细节，建模符号则用于记录业务事件细节，记录结果易于相关人员理解，同时还易于IT开发人员转换成逻辑层和物理层维度模型。   

## 1.数据故事和7W框架   
>BEAM建模人员和BI相关人员使用7W框架来讲数据故事    
  
BEAM通过要求BI相关人员描述数据故事，以此促使他们思考除了当前报表需求之外更深远的东西：通过叙述的方式梳理出需要测量的业务过程的维度细节。要做到这个，BEAM建模人员只需使用7W框架来问问题，如此，BEAM方法便可赋能每个参与者进行维度思考的能力。BEAM建模人员问相关人员的问题，正是相关人员使用BI工具时会向数据仓库查询的问题。当他们查询数据仓库时，需要思考如何使用who, what, when, where, why 和 how 六个维度来测量业务过程。

## 2.图表和符号   
>BEAM表格支持示例数据建模     
 
BEAM表格（也叫事例数据表格）是主要的建模工具和图表类型，其使用电子表格形式来捕获数据故事，以及使用示例数据来描述数据需求。如此，BEAM表格能够使用示例而不是抽象数据来支持协同数据建模。根据和相关人员的交互，我们在白板上一列一列的建立起BEAM表格内容，然后再把完整的内容永久地记录在电子表格上。所得到的结果看起来很像一份电子表格报表（如图），而并非传统的抽象数据模型。
![image](https://user-images.githubusercontent.com/20431533/114264405-612cff00-9a1d-11eb-94a7-c18ba9c1f92b.png)

### 2.1.BEAM表格（示例数据）
>BEAM表格看起来像简单的电子表格报表     
 
相对于做数据建模，绝大部分相关人员更愿意去定义能回答特定业务问题的报表。令人兴奋的是，使用BEAM表格能让相关人员参与到数据建模过程中。虽然示例数据表格并非报表，但其相似程度足以让相关人员将其视为可视化的业务过程。   

### 2.2.BEAM短码
>BEAM方法使用短代码来记录数据的技术属性      

BEAM表格简单到不会给相关人员的建模工作制造人为障碍，在表达力上却足以捕获真实世界数据复杂性，足以记录可应对数据复杂性的维度建模设计模式。为了实现这个能力，BEAM表格使用字母短码。大部分字母短码是代表数据属性的两个字母，可被记录在电子表格的空格里，取代了需要专家建模工具才能产生的图形符号。通过在电子表格里添加短字母码，BEAM表格具备以下功能：
* 记录包括历史规则在内的维度字段属性   
* 记录包括聚合规则在内事实属性   
* 记录数据探查结果和关联数据源与需求
* 定义物理层维度模型：事实和维度模型
* 产出星型模型

>BEAM短码作为维度建模的速记符号    
  
BEAM短码作为速记符号，不仅可记录一般性数据属性如数据类型和非空属性等，还可以记录维度属性（如缓慢变化维度）和事实可加性等。BEAM短码可在面向技术人员的任意BEAM图表类型上用作标记，但对于对技术细节不感兴趣的相关人员，这些短码可以被隐藏和忽略。本书中，BEAM短码和其他的BEAM符号会使用黑体字符。附录B中列举了短码的参考列表。   

### 2.3.比较BEAM和ER图表
>接下来我们将使用Pomegranate Corp.公司的例子来描述BEAM   
   
我们以虚拟的Pomegranate Corporation (POM)公司为例进行实践并贯穿全书。作为开始，现在我们先用ER图表表示Pomegrante公司的订单处理数据模型（如图）.   
![image](https://user-images.githubusercontent.com/20431533/114264548-1eb7f200-9a1e-11eb-9168-dc3a87404a5c.png)
再用等价的BEAM表表示客户订单事件，然后对比两者的区别（如图）.  
![image](https://user-images.githubusercontent.com/20431533/114264572-4909af80-9a1e-11eb-9239-294b85cfe369.png)   

>和ER模型相比，BEAM表可捕获更多的业务信息     

通过查看ER图表，我们发现客户可以同一时间对多个产品下单，BEAM表也记录了同样的信息，但除此之外还揭示了以下内容：
* 客户可以是个体、公司、政府机构
* 产品于昨天被售出。
* 该产品已被上架售卖了10年
* 该产品价格波动幅度相当大
* 产品可以两两捆绑销售
* 客户可在同一天对同一个产品再次下单
* 订单可同时用美元和英镑交易
* 订单可支持零售或者批发。
* 可用百分比和金额来记录折扣

>示例数据包含大量信息  
   
除此之外，通过扫描BEAM表格，读者可能已经猜到Pomegranate公司所售卖的产品类型和公司类型。由此可见，示例数据包含大量信息，

### 2.4.数据模型类别    
>概念数据模型、逻辑数据模型和物理数据模型三层模型在提供的技术细节方面由浅入深     
 
根据敏捷建模人员所期望捕获和传递的技术细节深度，以及相关协作人员和目标用户的技术细节倾向，敏捷维度建模人员会选择不同层次的模型进行建模工作。       
概念数据模型（CDM）所包含的技术细节最少，主要被用于向非技术型相关人员的询问和探索数据需求。逻辑数据模型（LDM）可让建模人员在不深入数据库细节的前提下，记录更多技术细节。物理数据模型（PDM）则被数据库管理人员（DBA）用于针对具体的DBMS进行数据库模型设计。如表描述了每类数据模型的细节层次、目标用户以及相对应的BEAM工具类型。   
![image](https://user-images.githubusercontent.com/20431533/114264710-0a282980-9a1f-11eb-8765-7751356b71de.png)

>结合使用BEAM和ER符号，为不同用户创建协作模型   
    
从表描述的细节层次可以看出，图中描述订单处理的ER表就是一个逻辑数据模型，该ER表展示了主键、外键和关系基数。而图中的BEAM事件则是概念数据模型（也称商业模式），该模型是缺失主键、外键和关系基数等信息的。
![image](https://user-images.githubusercontent.com/20431533/114264761-596e5a00-9a1f-11eb-88d4-e83946b91047.png)

通过追加额外的列和短码，BEAM事件可被添加至BEAM表。每一类BEAM图表类别都有着适用场景和用户。和传统的基于概念模型的ER图相比，BEAM表更适合于和业务相关人员进行协同建模。除此之外，BEAM还有其他表类型、补充类短码和改进型ER图等工具，这些工具可被用于和开发者进行逻辑层/物理层星型模式设计的协作。      

### 2.5.BEAM图标类型   
>BEAM工具包括事件矩阵、时间线、维度层次图和增强型星型模型    
  
示例数据表并非唯一的BEAM工具。当BEAM建模人员处在不同业务层级、不同的技术细节层级和不同方面设计协作时，需要使用事件矩阵、时间线、维度层次图和增强型星型模型等不同的工具。如表，总结了以上各类工具的用法、模型类别、使用者以及详细描述这些工具的后续章节。   

BEAM支持敏捷理念的核心价值观：“**Individuals and interactions over proc- esses and tools.**”, “**Working software over comprehensive documentation.**” 和 “**Customer collaboration over contract negotiation.**”   

BEAM方法鼓励数据仓库实践人员直接和相关人员协作，产出兼容的数据模型而非需求文档，产出可运行的BI报表原型而非模型。如此，BEAM方法得以维护敏捷价值观和敏捷的原则：（**maximizing the amount of work not done**）   
